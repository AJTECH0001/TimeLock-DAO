import { Tx } from "../Tx"

describe("Tx.fromCbor", () => {

    test("parses simple IO tx", () => {

        expect(
            () => 
            Tx.fromCbor(
                "84a30081825820d11531780938f9fc6110c968b8cd571c3b88aa8981bb52c296090958fe27848f000182825839000456f170a8ee5d0fb93458a394ba3a4d043db096e58c8a1f33a6681dcb15713c952715df00f231200e7a208ddeb718d05fcd34c5f0bfdb801b00000045d952e577825839000456f170a8ee5d0fb93458a394ba3a4d043db096e58c8a1f33a6681dcb15713c952715df00f231200e7a208ddeb718d05fcd34c5f0bfdb801a000f4240021a00029049a0f5f6"
            ).toJson(),
        ).not.toThrow();

    });

    test("parses tx with plutus minting policy", () => {

        expect(
            () => 
            Tx.fromCbor(
                "84a600818258203ec172510007430a2acf65d1641689d55255e8aa8fa2800482d64aa2bb88caf4000d818258203ec172510007430a2acf65d1641689d55255e8aa8fa2800482d64aa2bb88caf4000182a2005839003a7a52bdf7c9445db07d902333ec5ba94cf012bf8a6586a606824ed37b1f87071222670a5d7504b843fe4038cd677bba7184ce12ca39f7a2011b00000045d9436e39a2005839003a7a52bdf7c9445db07d902333ec5ba94cf012bf8a6586a606824ed37b1f87071222670a5d7504b843fe4038cd677bba7184ce12ca39f7a201821a001e8480a1581c919d4c2c9455016289341b1a14dedf697687af31751170d56a31466ea145544f4b454e1a3b9aca00021a0002c54709a1581c919d4c2c9455016289341b1a14dedf697687af31751170d56a31466ea145544f4b454e1a3b9aca000b58204a9be8ef04017d85557512c3b40097344dc0dc3c58a3beaf0cd5ea772f643e95a2068147460100002249810581840100a246636f6e73747200466669656c647380821903201a0002754cf5f6"
            ).toJson(),
        ).not.toThrow();

    })

    test("tx with inline output datum", () => {

        expect(
            () => 
            Tx.fromCbor(
                "84a60081825820ef42c5fc55e62b32c3dd8e9c5c7692739d9a03d1cf6a329bb4ad5f03f49e2bbc000d81825820ef42c5fc55e62b32c3dd8e9c5c7692739d9a03d1cf6a329bb4ad5f03f49e2bbc000182a2005839004aceb8c360f356bc917b5c547ac4a72cdc6bd2d12a9138b96c9c8999951ee8b677ad1ad65cf38fa2cacd3564a5e2bdcb72405543b4fca9a7011b00000045d8df9874a300583900a9f0f6cb792035f3b50017a52a19c22715d8bc77223e9387236e8e62e38ebe88236fc97a21c1706403e8ff268d36fa961edaa248d840141e01821a001e8480a1581c919d4c2c9455016289341b1a14dedf697687af31751170d56a31466ea145544f4b454e1a3b9aca00028201d81846d8799f182aff021a0002c4ef09a1581c919d4c2c9455016289341b1a14dedf697687af31751170d56a31466ea145544f4b454e1a3b9aca000b5820508715c133b784a7a2a4a9cfe2b6f6dd115485d93b4f6fa284ff599549fe0c4ea2068147460100002249810581840100d87980821903201a0002754cf5f6"
            ).toJson()
        ).not.toThrow();
    })

});